<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- myBatis -->
<mapper namespace="com.kosta.project.dao.ICookRecipeDao">
   <!-- 요리톡 글쓰기 -->
   <insert id="Cook_write" parameterType="com.kosta.project.dto.CookRecipeDto">
      insert into
      cook_recipe
      (k_title, id, k_no, k_contentFile, k_thumbFile, k_category, k_regdate, k_src)
      values(#{k_title}, #{id}, cookrecipe_seq.nextval, #{k_contentFile}, #{k_thumbFile}, #{k_category}, sysdate, #{k_src})
   </insert>   
   <!-- 요리톡 글삭제 -->
   <delete id="Cook_delete">
      delete cook_recipe where k_no = #{k_no}
   </delete>
   <!-- 쿡레시피 k_no에 해당하는 전체 선택 -->
   <select id="Cook_selectAll" resultType="com.kosta.project.dto.CookRecipeDto">
      select * from cook_recipe where k_no=#{k_no}
   </select>
   <!-- 레시피/테마 글수정 update -->
   <update id="Cook_update" parameterType="com.kosta.project.dto.CookRecipeDto">
      update cook_recipe 
      set k_title=#{k_title}, k_contentFile=#{k_contentFile}, k_thumbFile=#{k_thumbFile}, k_category=#{k_category} where k_no=#{k_no} 
   </update>
   <!-- 레시피 카테고리순 리스트 SELECT recipe -->
   <select id="Cook_listAll" resultType="com.kosta.project.dto.CookRecipeDto">
      select * from cook_recipe order by k_category
   </select>
   <!-- 레시피 카테고리별 검색 SELECT recipe k_category -->
   <select id="Cook_listCategory" resultType="com.kosta.project.dto.CookRecipeDto">
      select * from cook_recipe where k_category=#{k_category}
   </select>
   <!-- 페이징처리 위해 해당 페이지에 출력될 내용 뽑기 _ recipe전체 -->
   <select id="Cook_onePageList" resultType="com.kosta.project.dto.CookRecipeDto">
      select * from(select A.*, rownum r from (select * from cook_recipe order by k_category) A) where r between #{_startRow} and #{_endRow}
   </select> 
   <!-- 페이징처리 위해 해당 페이지에 출력될 내용 뽑기 _ recipe카테고리별 -->
   <select id="Cook_onePageListCategory" resultType="com.kosta.project.dto.CookRecipeDto">
      select * from(select A.*, rownum r from (select * from cook_recipe where k_category=#{_k_category}) A) where r between #{_startRow} and #{_endRow}
   </select> 
   <!-- 레시피 테마 테이블 전체 데이터 갯수 구하기 -->
   <select id="Cook_countAll" resultType="int">
   	select count(k_no) from cook_recipe 
   </select>
</mapper>